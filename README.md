# AnimatedArchitecture

[![](https://jitpack.io/v/PimvanderLoos/AnimatedArchitecture.svg)](https://jitpack.io/#PimvanderLoos/AnimatedArchitecture)

AnimatedArchitecture is a plugin for the Minecraft server mod [Spigot](https://spigotmc.org). Its aim is to enhance your
server with animated blocks that can be used to create many kinds of animated architectural structures.

AnimatedArchitecture is the new upcoming rewrite of the old BigDoors plugin. It does not currently have a release
date<br>
If you are looking for BigDoors please check out [v1](https://github.com/PimvanderLoos/BigDoors/) instead.

## Using AnimatedArchitecture

### Warnings

Before you try to use AnimatedArchitecture, please be aware that this project is still very much in development. So
please ensure you regularly update the plugin, make frequent updates (and verify them), and don't be too surprised if
you run into the occasional bug or two.

### Requirements:

* Java 19+
* A Spigot server (or a fork) for Minecraft 1.19.4+

### Installation:

* Grab the files of the latest [release](https://github.com/PimvanderLoos/AnimatedArchitecture/releases). You will need
  both the `AnimatedArchitecture-Spigot.jar` file and the `Structures.zip` file.
* Extract the `Structures.zip` file.
* Place the `AnimatedArchitecture-Spigot.jar` in the plugins directory of your server.
* Create the following folder (or start the server to generate it
  automatically): `plugins/AnimatedArchitecture/extensions`.
* Move all the jars from the `Structures.zip` file to the new `extensions` directory.
* (Re)start your server.

### Importing BigDoors' Database

As of [release](https://github.com/PimvanderLoos/BigDoors/releases) Alpha 0.1.8.44, BigDoors has a command that allows
you to export the old
database to the new format. While running that version, you can run the `BigDoors PrepareDatabaseForV2` command <b>in
the console</b> to export the database. Read the output in the console to see if everything was exported correctly.
Running this command does not affect the existing database for BigDoors.

After the export process has completed, you can copy the new `structures.db` file out of the `BigDoors` folder into
the `AnimatedArchitecture` folder. You will now be able to use the structures you created in BigDoors!

Please note that the export process may not always produce a perfect conversion, potentially leading to minor
inconsistencies, such as incorrect opening directions under certain circumstances. Despite these occasional
discrepancies, the majority of exported structures should function properly. Any errors can be easily rectified in-game
using available commands or the menu.

## Translations

### Official translations

Official translations are managed through [Weblate](https://hosted.weblate.org/projects/AnimatedArchitecture/):

<a href="https://hosted.weblate.org/engage/AnimatedArchitecture/">
<img src="https://hosted.weblate.org/widgets/AnimatedArchitecture/-/multi-auto.svg" alt="Translation status" />
</a>

### Custom translations

By default, the plugin will use the messages from `localization/translations.bundle`.
This file is regenerated every time the plugin restart, so please do not edit this file manually.

All translation keys used by the plugin are also written to a `localization/translations.properties` file.</br>
When you provide one or more keys with a value, the plugin will create a new file the next time it restarts:
`localization/translations_patched.properties`. This file contains the same data as the 'base' bundle, except for any
lines you changed in the properties file.</br>
To put it simply, you can override any of the official translations using the properties file.

One thing to keep in mind when trying to override translations is that it respects the locale entry.
This means that the `translations.properties` file only overrides the base localization messages.
The way the localization system works, is that it first tries to get the translated message from the locale defined in
the config, and, if that does not exist, from the base localization file.

For example, if you set the locale to `nl_NL` (Dutch) in the config, the plugin will try to retrieve messages from
`translations_nl_NL.properties` first. If no value is provided for the key the plugin is looking for, it will try the
`translations.properties` file next.

So, if you have set your locale to `nl_NL` in the config and want to override the default translations,
follow these steps:

1) Copy `translations.properties` to `translations_nl_NL.properties`.
2) Apply the changes you wish to make.
    * You can check the files in `localization/translations.bundle` to see the current translations.
3) Restart either the server or the plugin.
    * You can restart the plugin with `/AnimatedArchitecture restart`

## Compiling AnimatedArchitecture

Compilation requirements:

* Java 19+
* Maven

You can then compile the project by running the following command in this directory:

```mvn package```

To also run all the tests, static analysis tools etc., you can run the following command:

```mvn -P=errorprone test package checkstyle:checkstyle pmd:check```

The `AnimatedArchitecture-Spigot.jar` file can then be found
in `animatedarchitecture-spigot/spigot-core/target/AnimatedArchitecture-Spigot.jar`.</br>
The jars for each structure type can be found in `structures/StructuresOutput/<StructureType>.jar`.

## Developers

This project can be included as a dependency using [JitPack](https://jitpack.io/#PimvanderLoos/AnimatedArchitecture).

For the `artifactId` field, you can use any of the `core` modules. For the following examples below, we will
use `spigot-core`. This module contains the implementations for the Spigot platform, as well as some utility methods and
classes that make it easier to work with.

You could also use `animatedarchitecture-core` if you wish to only use the API and not the Spigot platform.

### Maven

```xml

<repositories>
    <repository>
        <id>jitpack.io</id>
        <url>https://jitpack.io</url>
    </repository>
</repositories>
```

```xml

<dependencies>
    <dependency>
        <groupId>com.github.PimvanderLoos.AnimatedArchitecture</groupId>
        <artifactId>spigot-core</artifactId>
        <version>0.3</version>
        <scope>provided</scope>
    </dependency>
</dependencies>
```

### Gradle

```gradle
repositories {
    maven { url "https://jitpack.io/" }
}

dependencies {
    compileOnly("com.github.PimvanderLoos.AnimatedArchitecture", "spigot-core", "0.3")
}
```

### Documentation

The javadocs for this project can be found [here](https://pimvanderloos.github.io/AnimatedArchitecture/javadoc/).
