# BigDoors v2

BigDoors is a plugin for the Minecraft server mod [Spigot](https://spigotmc.org). Its aim is to enhance your server with
animated blocks that can be used to create, amongst other things, big (animated) doors.

BigDoors v2 is the new upcoming release of BigDoors. It is currently still very much a work in progress without a
planned release date.<br>
If you are looking for the current release of BigDoors, please check out
[v1](https://github.com/PimvanderLoos/BigDoors/tree/v1) instead.

## Using v2

### Warnings

Before you try to use v2, please be aware that this project is still very much in development, so:

* There are many unfinished features.
* You will encounter many bugs when using it. I am aware of many of them, so you don't need to report every minor issue
  you encounter.
* Many of the current systems are just placeholders that will be replaced when I get around to them.
* There is currently no upgrade path from v1; this will be added (much) later on in the development process.
* <ins><b>Any doors you create now may be reset at any time</ins></b>.

### Requirements:

* Java 19
* A Spigot server (or a fork) for Minecraft 1.19.3.

### Installation:

* Grab the latest release from the [actions page](https://github.com/PimvanderLoos/BigDoors/actions). I would recommend
  picking a build from the master branch. You will need both `BigDoors-Spigot.zip` and `DoorTypes.zip` files.
* Extract both zip files.
* Place the `BigDoors-Spigot.jar` in the plugins directory of your server.
* Create the following folder (or start the server to generate it automatically): `plugins/BigDoors2/extensions`.
* Move all the jars from the `DoorTypes.zip` file to the new `extensions` directory.
* (Re)start your server.

## Translations

### Official translations

Official translations are managed through [Weblate](https://hosted.weblate.org/engage/bigdoors/):

<a href="https://hosted.weblate.org/engage/bigdoors/">
<img src="https://hosted.weblate.org/widgets/bigdoors/-/multi-auto.svg" alt="Translation status" />
</a>

### Custom translations

By default, the plugin will use the messages from `localization/translations.bundle`.
This file is regenerated every time the plugin restart, so please do not edit this file manually.

All translation keys used by the plugin are also written to a `localization/translations.properties` file.</br>
When you provide one or more keys with a value, the plugin will create a new file the next time it restarts:
`localization/translations_patched.properties`. This file contains the same data as the 'base' bundle, except for any
lines you changed in the properties file.</br>
To put it simply, you can override any of the official translations using the properties file.

One thing to keep in mind when trying to override translations is that it respects the locale entry.
This means that the `translations.properties` file only overrides the base localization messages.
The way the localization system works, is that it first tries to get the translated message from the locale defined in
the config, and, if that does not exist, from the base localization file.

For example, if you set the locale to `nl_NL` (Dutch) in the config, the plugin will try to retrieve messages from
`translations_nl_NL.properties` first. If no value is provided for the key the plugin is looking for, it will try the
`translations.properties` file next.

So, if you have set your locale to `nl_NL` in the config and want to override the default translations,
follow these steps:

1) Copy `translations.properties` to `translations_nl_NL.properties`.
2) Apply the changes you wish to make.
    * You can check the files in `localization/translations.bundle` to see the current translations.
3) Restart either the server or the plugin.
    * You can restart the plugin with `/BigDoors restart`

## Compiling BigDoors v2

Compilation requirements:

* Java 19+
* Maven
* Have NMS for 1.19.3 in your local repository. You can get this
  by [running BuildTools](https://www.spigotmc.org/wiki/buildtools/#running-buildtools) for 1.19.3.

You can then compile the project by running the following command in this directory:

```mvn package```

To also run all the tests, static analysis tools etc., you can run the following command:

```mvn -P=errorprone test package checkstyle:checkstyle pmd:check```

The `BigDoors-Spigot.jar` file can then be found in `bigdoors-spigot/spigot-core/target/BigDoors-Spigot.jar`.
The jars for each door type can be found in `bigdoors-doors/DoorTypes/<DoorType>.jar`.

## Documentation
The javadocs for the current project can be found [here](https://pimvanderloos.github.io/BigDoors/javadoc/).
