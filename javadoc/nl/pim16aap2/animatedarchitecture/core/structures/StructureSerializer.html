<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (19) on Tue Mar 21 19:34:27 UTC 2023 -->
<title>StructureSerializer (animatedarchitecture 1 API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-03-21">
<meta name="description" content="declaration: package: nl.pim16aap2.animatedarchitecture.core.structures, class: StructureSerializer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.0.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/StructureSerializer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">nl.pim16aap2.animatedarchitecture.core.structures</a></div>
<h1 title="Class StructureSerializer" class="title">Class StructureSerializer&lt;T extends <a href="AbstractStructure.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">AbstractStructure</a>&gt;</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">nl.pim16aap2.animatedarchitecture.core.structures.StructureSerializer&lt;T&gt;</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>Type Parameters:</dt>
<dd><code>T</code> - The type of structure.</dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">StructureSerializer&lt;T extends <a href="AbstractStructure.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">AbstractStructure</a>&gt;</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Manages the serialization aspects of the structures.
 <p>
 The <a href="../annotations/PersistentVariable.html" title="annotation interface in nl.pim16aap2.animatedarchitecture.core.annotations"><code>PersistentVariable</code></a> annotation is used on fields to determine which fields are serialized. The
 <a href="../annotations/PersistentVariable.html#value()"><code>PersistentVariable.value()</code></a> provided to the animation is used for two things:
 <ul>
     <li>The name is used to provide the name under which to store the value. This means that changing this value will
     cause the serializer to both serialize and deserialize the associated object under a different name. Each name
     must be unique.</li>
     <li>When a constructor contains more than one parameter of a given type, the provided name is used to figure
     out which deserialized object to map to which parameter.</li>
 </ul>
 <p>
 The <a href="AbstractStructure.BaseHolder.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures"><code>AbstractStructure.BaseHolder</code></a> object is always provided and does not need to be handled in any specific
 way.
 <p>
 When a value is missing during deserialization, null will be substituted in its place if it is not a primitive. If
 the type is a primitive, an exception will be thrown.
 <p>
 The <a href="../annotations/Deserialization.html" title="annotation interface in nl.pim16aap2.animatedarchitecture.core.annotations"><code>Deserialization</code></a> annotation is used for deserialization to specify which constructor to use. The
 annotation accepts an optional integer to specify a version. This refers to <a href="StructureType.html#getVersion()"><code>StructureType.getVersion()</code></a>. When
 a structure is deserialized, this class will first attempt to use the constructor that specified the exact version
 that matches the data that has to be deserialized. If no such constructor exists, this class will fall back to the
 constructor that does not specify a version at all or explicitly sets the value to -1. If this constructor also does
 not exist, an exception will be thrown.
 <p>
 For example:
 <pre> <code>
 public class MyStructure extends AbstractStructure
 {
     private static final int DEFAULT_MY_INT_0 = 12;
     private static final int DEFAULT_MY_INT_1 = 42;

     @PersistentVariable("ambiguousInteger0")
     private int myInt0;

     @PersistentVariable("ambiguousInteger1")
     private int myInt1;

     @PersistentVariable("nonAmbiguous")
     private String nonAmbiguous;

     @Deserialization(version = 2)
     public MyStructure(
         AbstractStructure.Holder base,
         @PersistentVariable("ambiguousInteger0") int0,
         @PersistentVariable("ambiguousInteger1") int1,
         String str) // String is not ambiguous, so no name required.
     {
         super(base);
         this.myInt0 = int0;
         this.myInt1 = int1;
         this.nonAmbiguous = str;
     }

     @Deserialization(version = 1)
     public MyStructure(
         AbstractStructure.Holder base,
         String str) // String is not ambiguous, so no name required.
     {
         this(base, DEFAULT_MY_INT_0, DEFAULT_MY_INT_1, str);
     }

     @Deserialization // Fallback
     public MyStructure(AbstractStructure.Holder base)
     {
         this(base, DEFAULT_MY_INT_0, DEFAULT_MY_INT_1, "DEFAULT_NAME");
     }
     ...
 }</code></pre>
 <p>
 The <a href="../annotations/Deserialization.html" title="annotation interface in nl.pim16aap2.animatedarchitecture.core.annotations"><code>Deserialization</code></a> annotation accepts an integer version variable. This allows specifying a different
 deserialization constructors for different versions of the structure type. When no constructor exists that explicitly
 supports the version of a structure that has to be deserialized, the deserializer will use the constructor whose
 annotation does not specify a specific version if it exists.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Pim</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(java.lang.Class,int)" class="member-name-link">StructureSerializer</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;<a href="StructureSerializer.html" title="type parameter in StructureSerializer">T</a>&gt;&nbsp;structureClass,
 int&nbsp;currentTypeVersion)</code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(nl.pim16aap2.animatedarchitecture.core.structures.StructureType)" class="member-name-link">StructureSerializer</a><wbr>(<a href="StructureType.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">StructureType</a>&nbsp;type)</code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="StructureSerializer.html" title="type parameter in StructureSerializer">T</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deserialize(nl.pim16aap2.animatedarchitecture.core.structures.StructureRegistry,nl.pim16aap2.animatedarchitecture.core.structures.AbstractStructure.BaseHolder,int,java.lang.String)" class="member-name-link">deserialize</a><wbr>(<a href="StructureRegistry.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">StructureRegistry</a>&nbsp;registry,
 <a href="AbstractStructure.BaseHolder.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">AbstractStructure.BaseHolder</a>&nbsp;structure,
 int&nbsp;version,
 <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;json)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deserializes the serialized type-specific data of a structure.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getStructureTypeName()" class="member-name-link">getStructureTypeName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#serialize(nl.pim16aap2.animatedarchitecture.core.structures.AbstractStructure)" class="member-name-link">serialize</a><wbr>(<a href="AbstractStructure.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">AbstractStructure</a>&nbsp;structure)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Serializes the type-specific data of a structure.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString()" class="member-name-link">toString</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(java.lang.Class,int)">
<h3>StructureSerializer</h3>
<div class="member-signature"><span class="annotations">@VisibleForTesting
</span><span class="modifiers">public</span>&nbsp;<span class="element-name">StructureSerializer</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Class.html" title="class or interface in java.lang" class="external-link">Class</a>&lt;<a href="StructureSerializer.html" title="type parameter in StructureSerializer">T</a>&gt;&nbsp;structureClass,
 int&nbsp;currentTypeVersion)</span></div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(nl.pim16aap2.animatedarchitecture.core.structures.StructureType)">
<h3>StructureSerializer</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">StructureSerializer</span><wbr><span class="parameters">(<a href="StructureType.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">StructureType</a>&nbsp;type)</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="serialize(nl.pim16aap2.animatedarchitecture.core.structures.AbstractStructure)">
<h3>serialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">serialize</span><wbr><span class="parameters">(<a href="AbstractStructure.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">AbstractStructure</a>&nbsp;structure)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Serializes the type-specific data of a structure.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>structure</code> - The structure.</dd>
<dt>Returns:</dt>
<dd>The serialized type-specific data represented as a json string.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="deserialize(nl.pim16aap2.animatedarchitecture.core.structures.StructureRegistry,nl.pim16aap2.animatedarchitecture.core.structures.AbstractStructure.BaseHolder,int,java.lang.String)">
<h3>deserialize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="StructureSerializer.html" title="type parameter in StructureSerializer">T</a></span>&nbsp;<span class="element-name">deserialize</span><wbr><span class="parameters">(<a href="StructureRegistry.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">StructureRegistry</a>&nbsp;registry,
 <a href="AbstractStructure.BaseHolder.html" title="class in nl.pim16aap2.animatedarchitecture.core.structures">AbstractStructure.BaseHolder</a>&nbsp;structure,
 int&nbsp;version,
 <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;json)</span></div>
<div class="block">Deserializes the serialized type-specific data of a structure.
 <p>
 The structure and the deserialized data are then used to create an instance of the structure type.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>registry</code> - The registry to use for any potential registration.</dd>
<dd><code>structure</code> - The base structure data.</dd>
<dd><code>version</code> - The version of the type to deserialize. See <a href="StructureType.html#getVersion()"><code>StructureType.getVersion()</code></a>.</dd>
<dd><code>json</code> - The serialized type-specific data represented as a json string.</dd>
<dt>Returns:</dt>
<dd>The newly created instance.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStructureTypeName()">
<h3>getStructureTypeName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getStructureTypeName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="toString()">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span>()</div>
<dl class="notes">
<dt>Overrides:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
